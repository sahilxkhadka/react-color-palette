Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){return e>t?t:e<n?n:e}function u(e){if(!e.startsWith("#")){const t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("2d context not supported or canvas already initialized");return t.fillStyle=e,t.fillStyle}return 4===e.length||5===e.length?e=e.split("").map(((e,t)=>t?e+e:"#")).join(""):7===e.length||9===e.length?e:"#000000"}function c(e){e=e.slice(1);const t=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16);let a=parseInt(e.slice(6,8),16)||void 0;return a&&(a/=255),{r:t,g:n,b:r,a:a}}function s({r:e,g:t,b:n,a:r}){e/=255,t/=255,n/=255;const a=Math.max(e,t,n),l=a-Math.min(e,t,n);return{h:l?60*(a===e?(t-n)/l+(t<n?6:0):a===t?2+(n-e)/l:4+(e-t)/l):0,s:a?l/a*100:0,v:100*a,a:r}}function i({r:e,g:t,b:n,a:r}){return`#${[e,t,n,r].map(((e,t)=>void 0!==e?(t<3?e:Math.round(255*e)).toString(16).padStart(2,"0"):"")).join("")}`}function h(e,t){let n=u("#121212"),r=c(n),a=s(r);if("hex"===e){n=u(t),r=c(n),a=s(r)}else if("rgb"===e){r=t,n=i(r),a=s(r)}else if("hsv"===e){a=t,r=function({h:e,s:t,v:n,a:r}){const a=~~(e/60),l=e/60-a,o=(n/=100)*(1-(t/=100)),u=n*(1-t*l),c=n*(1-t*(1-l)),s=a%6;return{r:Math.round(255*[n,u,o,o,c,n][s]),g:Math.round(255*[c,n,n,u,o,o][s]),b:Math.round(255*[o,o,c,n,n,u][s]),a:r}}(a),n=i(r)}return{hex:n,rgb:r,hsv:a}}const d=({className:t,style:r,onChange:a,children:l})=>{const u=e.useRef(null),c=(e,t)=>{if(u.current){const{current:n}=u,{width:r,height:l,left:c,top:s}=n.getBoundingClientRect(),i=o(e.clientX-c,r,0),h=o(e.clientY-s,l,0);a({x:i,y:h}),t&&a({x:i,y:h,complete:!0})}};return n.default.createElement("div",{ref:u,className:t,style:r,onMouseDown:e=>{if(0!==e.button)return;c(e);const t=e=>{c(e)},n=e=>{document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",n,!1),c(e,!0)};document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",n,!1)}},l)},p=({width:t,color:r,onChange:l,onChangeComplete:o})=>{const u=e.useMemo((()=>{var e;const n=function(e,t){return e*t}(null!==(e=r.hsv.a)&&void 0!==e?e:1,t);return n}),[r.hsv.a,t]),c=e.useMemo((()=>`${r.rgb.r}, ${r.rgb.g}, ${r.rgb.b}`),[r.rgb]),s=e.useMemo((()=>{var e;return`${c}, ${null!==(e=r.rgb.a)&&void 0!==e?e:1}`}),[c,r.rgb.a]),i=e.useMemo((()=>-u-2),[u]);return n.default.createElement(d,{className:"rcp-alpha",onChange:({x:e,complete:n})=>{const u=h("hsv",a(a({},r.hsv),{},{a:e/t}));l(u),n&&o&&o(u)},style:{background:`linear-gradient(to right, rgba(${c}, 0), rgba(${c}, 1)) top left / auto auto,\n              conic-gradient(#666 0.25turn, #999 0.25turn 0.5turn, #666 0.5turn 0.75turn, #999 0.75turn) top left / 12px 12px\n              repeat`}},n.default.createElement("div",{className:"rcp-alpha-cursor",style:{left:u,background:`linear-gradient(to right, rgba(${s}), rgba(${s})) top left / auto auto,\n                conic-gradient(#666 0.25turn, #999 0.25turn 0.5turn, #666 0.5turn 0.75turn, #999 0.75turn) ${i}px 2px / 12px 12px\n                repeat`}}))},m=({width:t,height:r,color:l,onChange:o,onChangeComplete:u})=>{const c=e.useMemo((()=>{const[e,n]=function(e,t,n){const{s:r,v:a}=e.hsv;return[r/100*t,(100-a)/100*n]}(l,t,r);return{x:e,y:n}}),[l,t,r]);return n.default.createElement(d,{className:"rcp-saturation",style:{height:r,backgroundColor:`hsl(${l.hsv.h}, 100%, 50%)`},onChange:({x:e,y:n,complete:c=!1})=>{const s=h("hsv",a(a({},l.hsv),{},{s:e/t*100,v:100-n/r*100}));o(s),c&&u&&u(s)}},n.default.createElement("div",{className:"rcp-saturation-cursor",style:{left:c.x,top:c.y,backgroundColor:l.hex}}))},f=({width:t,color:r,onChange:l,onChangeComplete:o})=>{const u=e.useMemo((()=>{const e=function(e,t){return e/360*t}(r.hsv.h,t);return e}),[r.hsv.h,t]);return n.default.createElement(d,{className:"rcp-hue",onChange:({x:e,complete:n=!1})=>{const u=h("hsv",a(a({},r.hsv),{},{h:e/t*360}));l(u),n&&o&&o(u)}},n.default.createElement("div",{className:"rcp-hue-cursor",style:{left:u,backgroundColor:`hsl(${r.hsv.h}, 100%, 50%)`}}))};function g(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}const v=/[0-9A-F]/i;const b=({color:t,hideHEX:r,onChange:l})=>{const o=e.useCallback((()=>({value:t.hex,inputted:!1})),[t.hex]),[u,c]=e.useState(o);e.useEffect((()=>{u.inputted||c(o)}),[u.inputted,o]);return n.default.createElement(n.default.Fragment,null,!r&&n.default.createElement("div",{className:"rcp-fields-element hex-element"},n.default.createElement("input",{className:"rcp-fields-element-input",value:u.value,onFocus:()=>c(a(a({},u),{},{inputted:!0})),onChange:e=>{const t=e.target.value;(function(e){return e.startsWith("#")?(e=e.slice(1),v.test(e[e.length-1])):/\w/i.test(e)&&!/\d/.test(e)||""===e})(t)&&(l(h("hex",t)),c(a(a({},u),{},{value:t})))},onBlur:()=>c(a(a({},u),{},{inputted:!1}))}),n.default.createElement("label",{className:"rcp-fields-element-label"},"HEX")))},E=({color:t,hideRGB:r,hideHSV:l,alpha:u,onChange:c})=>{const s=e.useCallback((()=>({value:`${t.rgb.r}, ${t.rgb.g}, ${t.rgb.b}${u&&void 0!==t.rgb.a?`, ${g(t.rgb.a,3)}`:""}`,inputted:!1})),[t.rgb,u]),i=e.useCallback((()=>({value:`${Math.round(t.hsv.h)}Â°, ${Math.round(t.hsv.s)}%, ${Math.round(t.hsv.v)}%${u&&void 0!==t.hsv.a?`, ${g(t.hsv.a,3)}`:""}`,inputted:!1})),[t.hsv,u]),[d,p]=e.useState(s),[m,f]=e.useState(i);e.useEffect((()=>{d.inputted||p(s)}),[d.inputted,s]),e.useEffect((()=>{m.inputted||f(i)}),[m.inputted,i]);return n.default.createElement(n.default.Fragment,null,(!r||!l)&&n.default.createElement(n.default.Fragment,null,!r&&n.default.createElement("div",{className:"rcp-fields-element"},n.default.createElement("input",{className:"rcp-fields-element-input",value:d.value,onFocus:()=>p(a(a({},d),{},{inputted:!0})),onChange:e=>{const t=e.target.value.match(/\d+(?:\.\d+)?/g);if(t&&(3===t.length||u&&4===t.length)){const e=function(e){const[t,n,r,a]=e.map(((e,t)=>o(Number(e),t<3?255:1,0)));return{r:t,g:n,b:r,a:a}}(t);c(h("rgb",e))}p(a(a({},d),{},{value:e.target.value}))},onBlur:()=>p(a(a({},d),{},{inputted:!1}))}),n.default.createElement("label",{className:"rcp-fields-element-label"},"RGB")),!l&&n.default.createElement("div",{className:"rcp-fields-element"},n.default.createElement("input",{className:"rcp-fields-element-input",value:m.value,onFocus:()=>f(a(a({},m),{},{inputted:!0})),onChange:e=>{const t=e.target.value.match(/\d+(?:\.\d+)?/g);if(t&&(3===t.length||u&&4===t.length)){const e=function(e){const[t,n,r,a]=e.map(((e,t)=>o(Number(e),t?t<3?100:1:360,0)));return{h:t,s:n,v:r,a:a}}(t);c(h("hsv",e))}f(a(a({},m),{},{value:e.target.value}))},onBlur:()=>f(a(a({},m),{},{inputted:!1}))}),n.default.createElement("label",{className:"rcp-fields-element-label"},"HSV"))))},C=({color:e,hideHEX:t,hideRGB:r,hideHSV:a,alpha:l,onChange:o})=>n.default.createElement(n.default.Fragment,null,(!t||!r||!a)&&n.default.createElement("div",{className:"rcp-fields"},n.default.createElement(E,{color:e,hideRGB:r,hideHSV:a,alpha:l,onChange:o}),n.default.createElement(b,{color:e,hideHEX:t,onChange:o})));exports.ColorPicker=({width:e,height:t=e,color:r,onChange:a,onChangeComplete:l,hideHEX:o=!1,hideRGB:u=!1,hideHSV:c=!1,alpha:s=!1,dark:i=!1})=>n.default.createElement("div",{className:"rcp "+(i?"rcp-dark":"rcp-light"),style:{width:e}},n.default.createElement(m,{width:e,height:t,color:r,onChange:a,onChangeComplete:l}),n.default.createElement("div",{className:"rcp-body"},n.default.createElement(f,{width:e-40,color:r,onChange:a,onChangeComplete:l}),s&&n.default.createElement(p,{width:e-40,color:r,onChange:a,onChangeComplete:l}),n.default.createElement(C,{color:r,hideHEX:o,hideRGB:u,hideHSV:c,alpha:s,onChange:a}))),exports.toColor=h,exports.useColor=function(t,n){const[r,a]=e.useState((()=>{switch(t){case"hex":return h("hex",n);case"rgb":return h("rgb",n);case"hsv":return h("hsv",n);default:return h("hex","#121212")}}));return[r,a]};
